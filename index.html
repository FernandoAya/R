<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Alegr칤a</title>
    <link rel="shortcut icon" href="logo.png"/>
    <style>
        body {
            margin: 0; padding: 0;
            background-color: #000;
            overflow: hidden;
            font-family: 'Arial', sans-serif;
            cursor: pointer;
            user-select: none;
            -webkit-user-select: none;
        }

        .ghost {
            position: absolute;
            width: 70px; height: 90px;
            background-repeat: no-repeat;
            background-size: contain;
            filter: drop-shadow(0 0 15px rgba(242, 211, 188, 0.8));
            animation: float 3s infinite ease-in-out;
            z-index: 1;
            transition: left 1.8s ease, top 1.8s ease, transform .25s;
            will-change: left, top, transform;
            touch-action: manipulation;
        }

        .ghost::before {
            content: "";
            position: absolute;
            width: 100%; height: 60%; bottom: 0;
            background: radial-gradient(ellipse at center, rgba(255,255,255,0.8) 0%, rgba(255,255,255,0) 70%);
            border-radius: 50% 50% 0 0;
        }

        .ghost::after {
            content: "";
            position: absolute;
            width: 100%; height: 30%; bottom: -5%;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 30"><path fill="%23FFF" d="M0 0 C20 30, 30 10, 50 20 S80 5, 100 0 Z"/></svg>') repeat-x;
            background-size: 100px 30px;
            animation: wave 3s infinite linear;
        }

        .ghost .face { position: absolute; width: 100%; height: 40%; top: 30%; left: 0; z-index: 2; }
        .ghost .eyes { position: absolute; width: 70%; left: 20%; top: -5%; display:flex; justify-content:space-between; }
        .ghost .eye { width:17px; height:20px; background:#333; border-radius:50%; position:relative; animation: blink 4s infinite; }
        .ghost .eye::after { content:""; position:absolute; width:8px; height:8px; background:white; border-radius:50%; top:5px; left:5px; }
        .ghost .mouth { position:absolute; width:30px; height:15px; background:#333; border-radius:0 0 30px 30px; left:35%; top:55%; transition: all .3s; }

        .message {
            position: absolute;
            color: white;
            background-color: rgba(255,105,180,0.92);
            padding: 10px 15px;
            border-radius: 15px;
            font-size: 14px;
            text-align: center;
            min-width: 120px; max-width: 200px;
            display: none;
            z-index: 999999 !important;
            text-shadow: 1px 1px 2px #000;
            box-shadow: 0 0 10px rgba(0,0,0,0.5);
            left: 50%;
            transform: translateX(-50%);
            pointer-events: none;
            word-break: break-word;
        }

        .kiss {
            position: absolute;
            font-size: 28px;
            animation: fly 1.5s forwards;
            opacity: 0;
            z-index: 5;
            pointer-events: none;
            filter: drop-shadow(0 0 5px rgba(255,0,0,0.7));
        }

        @keyframes float {
            0%,100% { transform: translateY(0) rotate(-2deg); }
            25% { transform: translateY(-12px) rotate(2deg); }
            50% { transform: translateY(-20px) rotate(-2deg); }
            75% { transform: translateY(-12px) rotate(2deg); }
        }

        @keyframes wave { 0% { background-position-x: 0; } 100% { background-position-x: 100px; } }
        @keyframes blink { 0%,48%,52%,100% { height:25px; } 50% { height:5px; } }
        @keyframes fly { 0% { transform: translate(0,0) scale(1); opacity:1 } 100% { transform: translate(var(--tx),var(--ty)) scale(0.5); opacity:0 } }

        .title { position: fixed; top: 20px; left:0; right:0; text-align:center; color:#fff; font-size:24px; text-shadow: 0 0 10px #ff69b4; z-index:2; }
        .instructions { position: fixed; bottom:20px; left:0; right:0; text-align:center; color: rgba(255,255,255,0.7); font-size:16px; z-index:2; }

        /* peque침as protecciones en m칩vil */
        @media (max-width:420px){
            .ghost { width:60px; height:80px; }
            .message { min-width: 110px; max-width:170px; font-size:13px; }
        }
    </style>
</head>
<body>
    <div class="title">Quiero verte sonre칤r preciosa!</div>
    <div class="instructions">Toca en los fantasmas para recibir mensajitos</div>
    <div id="gameArea"></div>

    <script>
    // <-- USASTE ESTAS 9 FRASES: las dejo tal cual, SIN AGREGAR NINGUNA -->
    let romanticPhrases = [
        "Siempre extra침치ndote",
        "Mi coraz칩n siempre te necesita",
        "Nunca olvides que te quiero",
        "Tu sonrisa es mi lugar favorito",
        "Mi cora se alegra con un msj tuyo",
        "Sos mi luz en los d칤as oscuros",
        "Amo tus mordidas",
        "Sos mi complemento perfecto",
        "Gracias por nunca dejar de intentarlo"
    ];

    // Devuelve y elimina una frase para que NO se repita
    function getUniquePhrase() {
        if (romanticPhrases.length === 0) return "";
        const idx = Math.floor(Math.random() * romanticPhrases.length);
        return romanticPhrases.splice(idx, 1)[0];
    }

    const ghostColors = [
        "rgba(255, 235, 240, 0.9)",
        "rgba(255, 240, 245, 0.9)",
        "rgba(255, 245, 250, 0.9)"
    ];

    // helper: clamp
    function clamp(v, a, b){ return Math.max(a, Math.min(b, v)); }

    function createGhost() {
        const ghost = document.createElement('div');
        ghost.className = 'ghost';

        // inicial dentro de pant
        const startX = Math.random() * (window.innerWidth - 90);
        const startY = clamp(Math.random() * (window.innerHeight - 120), 50, window.innerHeight - 130);

        ghost.style.left = `${startX}px`;
        ghost.style.top = `${startY}px`;

        ghost.style.backgroundColor = ghostColors[Math.floor(Math.random() * ghostColors.length)];
        ghost.style.animationDuration = `${2 + Math.random() * 4}s`;

        // cara
        const face = document.createElement('div'); face.className='face';
        const eyes = document.createElement('div'); eyes.className='eyes';
        const leftEye = document.createElement('div'); leftEye.className='eye';
        const rightEye = document.createElement('div'); rightEye.className='eye';
        const mouth = document.createElement('div'); mouth.className='mouth';
        eyes.appendChild(leftEye); eyes.appendChild(rightEye);
        face.appendChild(eyes); face.appendChild(mouth);
        ghost.appendChild(face);

        // mensaje 칔NICO
        const message = document.createElement('div');
        message.className = 'message';
        message.textContent = getUniquePhrase();
        ghost.appendChild(message);

        // pausar movimiento cuando se muestra mensaje
        ghost.dataset.paused = '0';

        // MOVIMIENTO PER-GHOST (suave y con l칤mites, evita salirse)
        const mv = setInterval(() => {
            if (ghost.dataset.paused === '1') return; // si est치 mostrando mensaje, no mover
            // peque침o desplazamiento aleatorio
            const dx = (Math.random() - 0.5) * 60; // mayor rango pero suavizado por transition
            const dy = (Math.random() - 0.5) * 50;
            const curX = parseFloat(ghost.style.left) || 0;
            const curY = parseFloat(ghost.style.top) || 0;
            let nx = clamp(curX + dx, 8, window.innerWidth - 90);
            let ny = clamp(curY + dy, 40, window.innerHeight - 130);
            ghost.style.left = nx + 'px';
            ghost.style.top = ny + 'px';
        }, 1800);
        ghost.dataset.mv = mv; // por si queremos limpiar luego

        // al tocar (o click)
        const touchHandler = function(e){
            e.stopPropagation();

            // animar boca
            mouth.style.height = "10px";
            mouth.style.borderRadius = "50%";
            setTimeout(() => { mouth.style.height = "15px"; mouth.style.borderRadius = "0 0 30px 30px"; }, 300);

            // mostrar mensaje SI hay texto
            if (!message.textContent) return;
            message.style.display = 'block';

            // pausar movimiento para evitar repintados en m칩vil
            ghost.dataset.paused = '1';

            // calcular y ajustar posici칩n del mensaje para que no salga de la pantalla
            // lo hacemos despu칠s de que el DOM calcule tama침o (peque침o timeout)
            setTimeout(() => {
                adjustMessagePosition(message, ghost);
            }, 40);

            // mover el fantasma un poco hacia abajo (sin usar transform persistente)
            const originalTop = parseFloat(ghost.style.top) || 0;
            const desiredTop = clamp(originalTop + 26, 10, window.innerHeight - 130);
            ghost.style.top = desiredTop + 'px';

            // crear beso (usar coordenadas de toque/click; en touch dispositivos puede venir undefined)
            const cx = (e.touches && e.touches[0]) ? e.touches[0].clientX : (e.clientX || (window.innerWidth/2));
            const cy = (e.touches && e.touches[0]) ? e.touches[0].clientY : (e.clientY || (window.innerHeight/2));
            createKiss(cx, cy);

            // volver al estado normal despu칠s de 3s
            setTimeout(() => {
                message.style.display = 'none';
                // restaurar top (si no se movi칩 por otras razones)
                ghost.style.top = originalTop + 'px';
                ghost.dataset.paused = '0';
            }, 3000);
        };

        // soportar click y touch para m칩viles
        ghost.addEventListener('click', touchHandler);
        ghost.addEventListener('touchstart', touchHandler, {passive:true});

        document.getElementById('gameArea').appendChild(ghost);
    }

    // Ajusta horizontal/vertical para que el globo no salga de pantalla
    function adjustMessagePosition(message, ghost){
        // resetamos posibles reglas previas
        message.style.left = '50%';
        message.style.transform = 'translateX(-50%)';
        message.style.top = 'auto';
        message.style.bottom = '100%';

        const rect = message.getBoundingClientRect();
        // si se sale por la izquierda/derecha, ajusta horizontalmente
        if (rect.left < 6) {
            const shift = 6 - rect.left;
            message.style.left = `calc(50% + ${shift}px)`;
            message.style.transform = 'translateX(-50%)';
        }
        if (rect.right > window.innerWidth - 6) {
            const shift = (window.innerWidth - 6) - rect.right;
            message.style.left = `calc(50% + ${shift}px)`;
            message.style.transform = 'translateX(-50%)';
        }

        // si el mensaje queda fuera por arriba, poner abajo
        if (rect.top < 8) {
            message.style.bottom = 'auto';
            message.style.top = '100%';
        }

        // si queda fuera por abajo, poner arriba
        if (rect.bottom > window.innerHeight - 8) {
            message.style.top = 'auto';
            message.style.bottom = '100%';
        }
    }

    function createKiss(x, y) {
        const kiss = document.createElement('div');
        kiss.className = 'kiss';
        kiss.textContent = '游눎';
        // posici칩n segura dentro pantalla
        const px = clamp(x, 6, window.innerWidth - 30);
        const py = clamp(y, 6, window.innerHeight - 30);
        kiss.style.left = `${px}px`;
        kiss.style.top = `${py}px`;

        const angle = Math.random() * Math.PI * 2;
        const distance = 50 + Math.random() * 120;
        kiss.style.setProperty('--tx', `${Math.cos(angle) * distance}px`);
        kiss.style.setProperty('--ty', `${Math.sin(angle) * distance}px`);

        document.getElementById('gameArea').appendChild(kiss);
        setTimeout(() => kiss.remove(), 1500);
    }

    function initGame() {
        // Creamos N fantasmas = n칰mero de frases (as칤 no invento m치s)
        const count = romanticPhrases.length;
        for (let i = 0; i < count; i++) {
            setTimeout(() => createGhost(), i * 520);
        }
    }

    // Si se redimensiona, aseguramos que los fantasmas no queden fuera
    window.addEventListener('resize', function(){
        const ghosts = document.querySelectorAll('.ghost');
        ghosts.forEach(g => {
            const curX = parseFloat(g.style.left) || 0;
            const curY = parseFloat(g.style.top) || 0;
            g.style.left = clamp(curX, 8, window.innerWidth - 90) + 'px';
            g.style.top = clamp(curY, 40, window.innerHeight - 130) + 'px';
        });
    });

    window.addEventListener('load', initGame);
    </script>
</body>
</html>
