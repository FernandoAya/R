<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alegr√≠a</title>
    <link rel="shortcut icon" href="logo.png">

    <style>
        body {
            margin: 0; padding: 0;
            background-color: #000;
            overflow: hidden;
            font-family: 'Arial', sans-serif;
            cursor: pointer;
            user-select: none;
            -webkit-user-select: none;
        }

        .ghost {
            position: absolute;
            width: 70px; height: 90px;
            background-repeat: no-repeat;
            background-size: contain;
            filter: drop-shadow(0 0 15px rgba(242, 211, 188, 0.8));
            animation: float 3s infinite ease-in-out;
            z-index: 1;
            transition: transform .3s;
        }

        .ghost::before {
            content: "";
            position: absolute;
            width: 100%; height: 60%; bottom: 0;
            background: radial-gradient(ellipse at center, rgba(255,255,255,0.8) 0%, rgba(255,255,255,0) 70%);
            border-radius: 50% 50% 0 0;
        }

        .ghost::after {
            content: "";
            position: absolute;
            width: 100%; height: 30%; bottom: -5%;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 30"><path fill="%23FFF" d="M0 0 C20 30, 30 10, 50 20 S80 5, 100 0 Z"/></svg>') repeat-x;
            background-size: 100px 30px;
            animation: wave 3s infinite linear;
        }

        .ghost .face {
            position: absolute;
            width: 100%; height: 40%;
            top: 30%; left: 0; z-index: 2;
        }

        .ghost .eyes {
            position: absolute;
            width: 70%; left: 20%; top: -5%;
            display: flex; justify-content: space-between;
        }

        .ghost .eye {
            width: 17px; height: 20px;
            background: #333; border-radius: 50%;
            position: relative;
            animation: blink 4s infinite;
        }

        .ghost .eye::after {
            content: "";
            position: absolute;
            width: 8px; height: 8px;
            background: white; border-radius: 50%;
            top: 5px; left: 5px;
        }

        .ghost .mouth {
            position: absolute;
            width: 30px; height: 15px;
            background: #333;
            border-radius: 0 0 30px 30px;
            left: 35%; top: 55%;
            transition: all 0.3s;
        }

        .message {
            position: absolute;
            color: white;
            background-color: rgba(255, 105, 180, 0.92);
            padding: 10px 15px;
            border-radius: 15px;
            font-size: 14px;
            text-align: center;
            min-width: 120px; max-width: 180px;
            display: none;
            z-index: 999999 !important;
            text-shadow: 1px 1px 2px #000;
            box-shadow: 0 0 10px rgba(0,0,0,0.5);
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            animation: pulse 2s infinite;
            pointer-events: none;
        }

        .kiss {
            position: absolute;
            font-size: 28px;
            animation: fly 1.5s forwards;
            opacity: 0;
            z-index: 5;
            pointer-events: none;
            filter: drop-shadow(0 0 5px rgba(255,0,0,0.7));
        }

        @keyframes float {
            0%,100% { transform: translateY(0) rotate(-2deg); }
            25% { transform: translateY(-15px) rotate(2deg); }
            50% { transform: translateY(-25px) rotate(-2deg); }
            75% { transform: translateY(-15px) rotate(2deg); }
        }

        @keyframes wave {
            0% { background-position-x: 0; }
            100% { background-position-x: 100px; }
        }

        @keyframes blink {
            0%,48%,52%,100% { height: 25px; }
            50% { height: 5px; }
        }

        @keyframes fly {
            0% { transform: translate(0,0) scale(1); opacity: 1; }
            100% { transform: translate(var(--tx),var(--ty)) scale(0.5); opacity: 0; }
        }

        @keyframes pulse {
            0% { transform: translateX(-50%) scale(1); }
            50% { transform: translateX(-50%) scale(1.05); }
            100% { transform: translateX(-50%) scale(1); }
        }

        .title {
            position: fixed; top: 20px; left: 0; right: 0;
            text-align: center; color: white;
            font-size: 24px;
            text-shadow: 0 0 10px #ff69b4;
        }

        .instructions {
            position: fixed; bottom: 20px; left: 0; right: 0;
            text-align: center; color: rgba(255,255,255,0.7);
            font-size: 16px;
        }
    </style>
</head>

<body>

<div class="title">Quiero verte sonre√≠r preciosa!</div>
<div class="instructions">Toca en los fantasmas para recibir mensajitos</div>
<div id="gameArea"></div>

<script>

let romanticPhrases = [
    "Siempre extra√±√°ndote",
    "Mi coraz√≥n siempre te necesita",
    "Nunca olvides que te quiero",
    "Tu sonrisa es mi lugar favorito",
    "Mi cora se alegra con un msj tuyo",
    "Sos mi luz en los d√≠as oscuros",
    "Amo tus mordidas",
    "Sos mi complemento perfecto",
    "Gracias por nunca dejar de intentarlo",
    "Sos lo m√°s lindo que tengo"
];

function getUniquePhrase() {
    if (romanticPhrases.length === 0) return "";
    const index = Math.floor(Math.random() * romanticPhrases.length);
    return romanticPhrases.splice(index, 1)[0];
}

const ghostColors = [
    "rgba(255, 235, 240, 0.9)",
    "rgba(255, 240, 245, 0.9)",
    "rgba(255, 245, 250, 0.9)"
];

// üî•üî• NUEVO: Ajusta el mensaje para que NO se salga de la pantalla
function adjustMessagePosition(message, ghost) {
    const rect = message.getBoundingClientRect();

    let offsetX = 0;
    let offsetY = 0;

    // Correcciones horizontales
    if (rect.left < 5) offsetX = 5 - rect.left;
    if (rect.right > window.innerWidth - 5) offsetX = (window.innerWidth - 5) - rect.right;

    // Correcciones verticales
    if (rect.top < 5) {
        // Si arriba no hay espacio ‚Üí ponerlo abajo
        message.style.bottom = "auto";
        message.style.top = "100%";
    }

    if (rect.bottom > window.innerHeight - 5) {
        // Si abajo no hay espacio ‚Üí ponerlo arriba
        message.style.top = "auto";
        message.style.bottom = "100%";
    }

    // Aplicar correcci√≥n horizontal
    if (offsetX !== 0) {
        message.style.left = `calc(50% + ${offsetX}px)`;
    }
}

function createGhost() {

    const ghost = document.createElement('div');
    ghost.className = 'ghost';

    const x = Math.random() * (window.innerWidth - 100);
    const y = Math.random() * (window.innerHeight - 120);

    ghost.style.left = `${x}px`;
    ghost.style.top = `${y}px`;

    ghost.style.backgroundColor = ghostColors[Math.floor(Math.random() * ghostColors.length)];
    ghost.style.animationDuration = `${2 + Math.random() * 4}s`;

    // CARA
    const face = document.createElement('div');
    face.className = 'face';

    const eyes = document.createElement('div');
    eyes.className = 'eyes';

    const leftEye = document.createElement('div');
    leftEye.className = 'eye';

    const rightEye = document.createElement('div');
    rightEye.className = 'eye';

    const mouth = document.createElement('div');
    mouth.className = 'mouth';

    eyes.appendChild(leftEye);
    eyes.appendChild(rightEye);
    face.appendChild(eyes);
    face.appendChild(mouth);
    ghost.appendChild(face);

    // MENSAJE √öNICO
    const message = document.createElement('div');
    message.className = 'message';
    message.textContent = getUniquePhrase();
    ghost.appendChild(message);

    ghost.addEventListener('click', function (e) {
        e.stopPropagation();

        // Boca animada
        mouth.style.height = "10px";
        mouth.style.borderRadius = "50%";
        setTimeout(() => {
            mouth.style.height = "15px";
            mouth.style.borderRadius = "0 0 30px 30px";
        }, 300);

        // Mostrar mensaje
        message.style.display = 'block';

        // Mover fantasma un poco para NO TAPAR mensaje
        ghost.style.transform = "translateY(25px)";
        setTimeout(() => ghost.style.transform = "none", 3000);

        // Ajustar posici√≥n para NO SALIR DEL CELULAR
        setTimeout(() => adjustMessagePosition(message, ghost), 50);

        // Besito
        createKiss(e.clientX, e.clientY);

        // Ocultar mensaje luego
        setTimeout(() => message.style.display = 'none', 3000);

    });

    document.getElementById('gameArea').appendChild(ghost);
}

function createKiss(x, y) {
    const kiss = document.createElement('div');
    kiss.className = 'kiss';
    kiss.textContent = 'üíã';
    kiss.style.left = `${x}px`;
    kiss.style.top = `${y}px`;

    const angle = Math.random() * Math.PI * 2;
    const distance = 50 + Math.random() * 150;

    kiss.style.setProperty('--tx', `${Math.cos(angle) * distance}px`);
    kiss.style.setProperty('--ty', `${Math.sin(angle) * distance}px`);

    document.getElementById('gameArea').appendChild(kiss);
    setTimeout(() => kiss.remove(), 1500);
}

function initGame() {
    const count = 10;
    for (let i = 0; i < count; i++) {
        setTimeout(() => createGhost(), i * 600);
    }
}

window.addEventListener('load', initGame);

</script>

</body>
</html>
